(module
  (import "c4wa" "printf" (func $printf (param i32) (param i32)))
  (global $@stack (mut i32) (i32.const 8))
  (memory (export "memory") 1)
  (data (i32.const 1024) "Verifying: %.5f, %.6f, %.6f\0A\00(%.6f,%.6f)%c(%.6f,%.6f) = (%.6f,%.6f)\0A\00")
  (func $init (param $a i32) (param $x f64) (param $y f64)
    (f32.store align=4 (local.get $a) (f32.demote_f64 (local.get $x)))
    (f32.store align=4 (i32.add (local.get $a) (i32.const 4)) (f32.demote_f64 (local.get $y))))
  (func $sub (param $a i32) (param $b i32) (param $c i32)
    (f32.store align=4 (local.get $c) (f32.sub (f32.load align=4 (local.get $a)) (f32.load align=4 (local.get $b))))
    (f32.store align=4 (i32.add (local.get $c) (i32.const 4)) (f32.sub (f32.load align=4 (i32.add (local.get $a) (i32.const 4))) (f32.load align=4 (i32.add (local.get $b) (i32.const 4))))))
  (func $mul (param $a i32) (param $b i32) (param $c i32)
    (f32.store align=4 (local.get $c) (f32.sub (f32.mul (f32.load align=4 (local.get $a)) (f32.load align=4 (local.get $b))) (f32.mul (f32.load align=4 (i32.add (local.get $a) (i32.const 4))) (f32.load align=4 (i32.add (local.get $b) (i32.const 4))))))
    (f32.store align=4 (i32.add (local.get $c) (i32.const 4)) (f32.add (f32.mul (f32.load align=4 (local.get $a)) (f32.load align=4 (i32.add (local.get $b) (i32.const 4)))) (f32.mul (f32.load align=4 (i32.add (local.get $a) (i32.const 4))) (f32.load align=4 (local.get $b))))))
  (func $div (param $a i32) (param $b i32) (param $c i32)
    (local $m2 f32)
    (local.set $m2 (f32.add (f32.mul (f32.load align=4 (local.get $b)) (f32.load align=4 (local.get $b))) (f32.mul (f32.load align=4 (i32.add (local.get $b) (i32.const 4))) (f32.load align=4 (i32.add (local.get $b) (i32.const 4))))))
    (f32.store align=4 (local.get $c) (f32.div (f32.add (f32.mul (f32.load align=4 (local.get $a)) (f32.load align=4 (local.get $b))) (f32.mul (f32.load align=4 (i32.add (local.get $a) (i32.const 4))) (f32.load align=4 (i32.add (local.get $b) (i32.const 4))))) (local.get $m2)))
    (f32.store align=4 (i32.add (local.get $c) (i32.const 4)) (f32.div (f32.sub (f32.mul (f32.load align=4 (local.get $b)) (f32.load align=4 (i32.add (local.get $a) (i32.const 4)))) (f32.mul (f32.load align=4 (i32.add (local.get $b) (i32.const 4))) (f32.load align=4 (local.get $a)))) (local.get $m2))))
  (func $copy (param $a i32) (param $b i32)
    (f32.store align=4 (local.get $a) (f32.load align=4 (local.get $b)))
    (f32.store align=4 (i32.add (local.get $a) (i32.const 4)) (f32.load align=4 (i32.add (local.get $b) (i32.const 4)))))
  (func $mod (param $a i32) (result f32)
    (f32.sqrt (f32.add (f32.mul (f32.load align=4 (local.get $a)) (f32.load align=4 (local.get $a))) (f32.mul (f32.load align=4 (i32.add (local.get $a) (i32.const 4))) (f32.load align=4 (i32.add (local.get $a) (i32.const 4)))))))
  (func $shift (param $a i32) (param $b i32)
    (call $copy (i32.add (local.get $b) (i32.const 8)) (local.get $a))
    (call $copy (i32.add (local.get $b) (i32.const 16)) (i32.add (local.get $a) (i32.const 8)))
    (call $copy (local.get $b) (i32.add (local.get $a) (i32.const 16))))
  (func $C (param $tri i32) (result f32)
    (local $@stack_entry i32)
    (local $a i32)
    (local $b i32)
    (local $c i32)
    (local $t i32)
    (local.set $@stack_entry (global.get $@stack))
    (local.set $a (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $b (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $c (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $t (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (call $sub (local.get $tri) (i32.add (local.get $tri) (i32.const 8)) (local.get $c))
    (call $sub (i32.add (local.get $tri) (i32.const 8)) (i32.add (local.get $tri) (i32.const 16)) (local.get $a))
    (call $sub (i32.add (local.get $tri) (i32.const 16)) (local.get $tri) (local.get $b))
    (call $div (local.get $b) (local.get $a) (local.get $t))
    (global.set $@stack (local.get $@stack_entry))
    (f32.div (call $mod (local.get $c)) (f32.div (f32.load align=4 (i32.add (local.get $t) (i32.const 4))) (call $mod (local.get $t)))))
  (func $law_of_sines (param $tri_1 i32)
    (local $@stack_entry i32)
    (local $tri_2 i32)
    (local $tri_3 i32)
    (local.set $@stack_entry (global.get $@stack))
    (local.set $tri_2 (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 24)) (i32.const 1)) (i32.const 8)))))
    (local.set $tri_3 (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 24)) (i32.const 1)) (i32.const 8)))))
    (call $shift (local.get $tri_1) (local.get $tri_2))
    (call $shift (local.get $tri_2) (local.get $tri_3))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (call $C (local.get $tri_1))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (call $C (local.get $tri_2))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (call $C (local.get $tri_3))))
    (global.set $@stack (i32.sub (global.get $@stack) (i32.const 16)))
    (call $printf (i32.const 1024) (global.get $@stack))
    (global.set $@stack (local.get $@stack_entry)))
  (func $main (export "main") (result i32)
    (local $@stack_entry i32)
    (local $x i32)
    (local $y i32)
    (local $z i32)
    (local $t i32)
    (local $tri i32)
    (local.set $@stack_entry (global.get $@stack))
    (local.set $x (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $y (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $z (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (local.set $t (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 8)) (i32.const 1)) (i32.const 8)))))
    (call $init (local.get $x) (f64.const 0.5) (f64.const 0.75))
    (call $init (local.get $y) (f64.const -1.3) (f64.const 1.1))
    (call $div (local.get $x) (local.get $y) (local.get $z))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $x))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $x) (i32.const 4)))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (i64.store align=8 (global.get $@stack) (i64.const 47))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $y))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $y) (i32.const 4)))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $z))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $z) (i32.const 4)))))
    (global.set $@stack (i32.sub (global.get $@stack) (i32.const 48)))
    (call $printf (i32.const 1053) (global.get $@stack))
    (call $mul (local.get $y) (local.get $z) (local.get $t))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $y))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $y) (i32.const 4)))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (i64.store align=8 (global.get $@stack) (i64.const 42))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $z))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $z) (i32.const 4)))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (local.get $t))))
    (global.set $@stack (i32.add (global.get $@stack) (i32.const 8)))
    (f64.store align=8 (global.get $@stack) (f64.promote_f32 (f32.load align=4 (i32.add (local.get $t) (i32.const 4)))))
    (global.set $@stack (i32.sub (global.get $@stack) (i32.const 48)))
    (call $printf (i32.const 1053) (global.get $@stack))
    (local.set $tri (global.get $@stack))
    (global.set $@stack (i32.add (i32.const 8) (i32.mul (i32.const 8) (i32.div_s (i32.sub (i32.add (global.get $@stack) (i32.const 24)) (i32.const 1)) (i32.const 8)))))
    (call $init (local.get $tri) (f64.const 1.0) (f64.const 2.5))
    (call $init (i32.add (local.get $tri) (i32.const 8)) (f64.const 4.0) (f64.const -1.0))
    (call $init (i32.add (local.get $tri) (i32.const 16)) (f64.const 11.0) (f64.const 4.0))
    (call $law_of_sines (local.get $tri))
    (global.set $@stack (local.get $@stack_entry))
    (i32.const 0)))
